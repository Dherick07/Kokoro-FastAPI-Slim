<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dexterous Studio ‚Äî TTS</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300&family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/studio.css">
    <script src="./siriwave.js"></script>
</head>
<body>

    <!-- ‚îÄ‚îÄ Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <header class="studio-header">
        <div class="header-logo">
            <div class="logo-mark">
                <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="16" cy="16" r="13.5" stroke="#00b896" stroke-width="1.5"/>
                    <ellipse cx="16" cy="16" rx="7" ry="4.5" fill="#00b896" opacity="0.9"/>
                    <circle cx="16" cy="16" r="2" fill="#f5f4f0"/>
                </svg>
            </div>
            <div class="logo-wordmark">
                <span class="logo-brand">dexterous</span>
                <span class="logo-product">Studio</span>
            </div>
        </div>

        <div class="header-center">
            <div class="model-badge">
                <span class="model-badge-dot"></span>
                Kokoro TTS ¬∑ v1.0
            </div>
        </div>

        <div class="header-actions">
            <div id="status" class="status-pill"></div>
            <label class="autoplay-label">
                <input type="checkbox" id="autoplay-toggle" checked>
                <span class="toggle-track"></span>
                <span>Auto-play</span>
            </label>
        </div>
    </header>

    <!-- ‚îÄ‚îÄ Main 3-panel layout ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <main class="studio-main">

        <!-- Panel 1: Script Input + Tips Carousel -->
        <section class="panel panel-script">
            <div class="panel-header">
                <h2>Script Input</h2>
                <span id="char-count" class="char-count">Characters: 0</span>
            </div>

            <!-- Text editor (fixed height) -->
            <div id="text-editor" class="script-textarea-wrapper"></div>

            <!-- Tips carousel (fills remaining space) -->
            <div class="tips-carousel" id="tips-carousel">
                <div class="tips-header">
                    <span class="tips-title">Quick Tips</span>
                    <div class="tips-dots" id="tips-dots"></div>
                </div>
                <div class="tips-track-wrapper">
                    <div class="tips-track" id="tips-track">

                        <div class="tip-card">
                            <div class="tip-icon">‚ö°</div>
                            <div class="tip-label">Keep it short for faster results</div>
                            <div class="tip-body">For the quickest audio output, keep your text under 300 characters. Longer scripts generate slower ‚Äî use the Format Pages feature to split big texts automatically.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üé≠</div>
                            <div class="tip-label">Blend voices for a unique sound</div>
                            <div class="tip-body">Select two or more voices in the Voice Mixer and adjust their mix weights. Blending voices creates a completely unique vocal character that no single voice alone can produce.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üî§</div>
                            <div class="tip-label">Punctuation shapes the rhythm</div>
                            <div class="tip-body">Commas create short pauses, periods create longer ones. Use ellipses (...) for dramatic effect. The AI reads punctuation just like a human narrator would.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üê¢</div>
                            <div class="tip-label">Slow down for clarity</div>
                            <div class="tip-body">Lower the Generation Speed in Studio Config (try 0.8√ó) if your script has technical terms or you want a calm, deliberate delivery. Great for explainer content.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üíæ</div>
                            <div class="tip-label">Download after generation</div>
                            <div class="tip-body">Once generation completes, the download button glows green. Choose WAV for the highest quality, or MP3 for smaller file size ‚Äî both sound excellent.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üìÑ</div>
                            <div class="tip-label">Upload a text file directly</div>
                            <div class="tip-body">Have a long script? Click "Upload Text" to load any .txt file. Use "Format Pages" to break it into chunks so you can generate and review each section separately.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üîä</div>
                            <div class="tip-label">Preview voices before you choose</div>
                            <div class="tip-body">Click the small play button next to any voice in the dropdown to hear a quick sample. This lets you find the perfect voice without generating your full script first.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üåç</div>
                            <div class="tip-label">Multiple languages supported</div>
                            <div class="tip-body">Voices starting with "af/am" are American English, "bf/bm" are British, "ff" is French, "jf/jm" are Japanese, and "zf/zm" are Chinese. Pick the right prefix for your language.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">üéöÔ∏è</div>
                            <div class="tip-label">Fine-tune your voice mix</div>
                            <div class="tip-body">When mixing voices, use the percentage slider to control how much each voice contributes. A 70/30 mix sounds very different from 50/50 ‚Äî experiment to find your ideal blend.</div>
                        </div>

                        <div class="tip-card">
                            <div class="tip-icon">‚úçÔ∏è</div>
                            <div class="tip-label">Use plain, simple text</div>
                            <div class="tip-body">Avoid special characters like smart quotes or emojis. Stick to regular letters, numbers, and basic punctuation (. , ! ? ‚Äî ...) for the best results. Copy-pasting from Word may add hidden characters.</div>
                        </div>

                    </div>
                </div>
                <div class="tips-nav">
                    <button class="tips-nav-btn" id="tips-prev">‚Üê Prev</button>
                    <button class="tips-nav-btn" id="tips-next">Next ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Panel 2: Voice Mixer -->
        <section class="panel panel-voices">
            <div class="panel-header">
                <h2>Voice Mixer</h2>
            </div>
            <div class="voice-search-wrapper">
                <input
                    type="text"
                    id="voice-search"
                    class="voice-search"
                    placeholder="Search voices..."
                    autocomplete="off"
                >
                <div class="voice-dropdown" id="voice-dropdown">
                    <div class="voice-options" id="voice-options"></div>
                </div>
            </div>
            <div class="selected-voices" id="selected-voices"></div>
        </section>

        <!-- Panel 3: Studio Config -->
        <section class="panel panel-config">
            <div class="panel-header">
                <h2>Studio Config</h2>
            </div>

            <div class="config-group">
                <label class="config-label" for="format-select">Output Quality</label>
                <select id="format-select" class="config-select">
                    <option value="mp3">Standard MP3</option>
                    <option value="wav">High Quality WAV</option>
                </select>
            </div>

            <div class="config-group">
                <label class="config-label" for="speed-slider">
                    Speed
                    <span class="config-label-val"><span id="speed-value">1.0</span>√ó</span>
                </label>
                <input type="range" id="speed-slider" class="config-slider" min="0.1" max="4" step="0.1" value="1.0">
            </div>

            <div class="config-group">
                <label class="config-label" for="volume-slider">
                    Volume
                    <span class="config-label-val" id="volume-value">100%</span>
                </label>
                <input type="range" id="volume-slider" class="config-slider" min="0" max="100" value="100">
            </div>

            <div class="config-divider"></div>

            <div class="btn-generate-wrap">
                <button id="generate-btn" class="btn-generate">
                    <span class="btn-text">Generate Audio</span>
                    <span class="loader"></span>
                </button>
            </div>

            <div class="btn-cancel-wrap">
                <button id="cancel-btn" class="btn-cancel" style="display: none;">
                    Cancel Generation
                </button>
            </div>
        </section>

    </main>

    <!-- ‚îÄ‚îÄ Bottom Audio Player ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <footer class="studio-player">
        <button id="play-pause-btn" class="player-play-btn" disabled aria-label="Play / Pause">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
                <path id="play-icon" d="M8 5v14l11-7z"/>
            </svg>
        </button>

        <div class="player-wave-wrap">
            <div id="wave-container" class="wave-container"></div>
            <input type="range" id="seek-slider" class="seek-slider" min="0" max="100" value="0" disabled aria-label="Seek">
        </div>

        <span id="time-display" class="time-display">0:00 / 0:00</span>

        <button id="download-btn" class="player-download-btn" disabled aria-label="Download audio">
            <svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor">
                <path d="M5 20h14v-2H5v2zm7-18v10.17l-3.59-3.58L7 10l5 5 5-5-1.41-1.41L13 12.17V2h-1z"/>
            </svg>
        </button>
    </footer>

    <script type="module" src="src/App.js"></script>

    <script>
        // ‚îÄ‚îÄ Volume display live update ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        document.addEventListener('DOMContentLoaded', () => {
            const volumeSlider = document.getElementById('volume-slider');
            const volumeValue  = document.getElementById('volume-value');
            if (volumeSlider && volumeValue) {
                volumeSlider.addEventListener('input', (e) => {
                    volumeValue.textContent = e.target.value + '%';
                });
            }
        });

        // ‚îÄ‚îÄ Tips Carousel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
        (function () {
            const TIPS_COUNT = 10;
            let current = 0;

            function init() {
                const track  = document.getElementById('tips-track');
                const dotsEl = document.getElementById('tips-dots');
                const prev   = document.getElementById('tips-prev');
                const next   = document.getElementById('tips-next');

                if (!track || !dotsEl) return;

                // Build dots
                for (let i = 0; i < TIPS_COUNT; i++) {
                    const d = document.createElement('button');
                    d.className = 'tips-dot' + (i === 0 ? ' active' : '');
                    d.setAttribute('aria-label', 'Tip ' + (i + 1));
                    d.addEventListener('click', () => goTo(i));
                    dotsEl.appendChild(d);
                }

                function goTo(idx) {
                    current = (idx + TIPS_COUNT) % TIPS_COUNT;
                    track.style.transform = `translateX(-${current * 100}%)`;
                    dotsEl.querySelectorAll('.tips-dot').forEach((d, i) => {
                        d.classList.toggle('active', i === current);
                    });
                }

                prev.addEventListener('click', () => goTo(current - 1));
                next.addEventListener('click', () => goTo(current + 1));

                // Auto-advance every 7 seconds
                setInterval(() => goTo(current + 1), 7000);
            }

            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', init);
            } else {
                init();
            }
        })();
    </script>
</body>
</html>
